<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MeatAxe: Application Framework</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MeatAxe&#160;<span id="projectnumber">2.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__app.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Application Framework</div>  </div>
</div>
<div class="contents">
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>The MeatAxe library provides a minimal framework for applications. </p>
<p>All MeatAxe applications should use this framework to achieve a consistent behaviour. The functions described above enable an application to process command line options and arguments. They also implement a rudimentary on-line help and automatic processing of some common options like "-V". Typically, a MeatAxe application's <code>main()</code> function should perform the following steps:</p>
<ul>
<li>Create an application object using <a class="el" href="group__app.html#ga8925f5813215f1be93dcfa321798292b" title="Initialize the application.">AppAlloc()</a>.</li>
<li>Process all command line options.</li>
<li>Process simple options without arguments.</li>
<li>Process options that take an argument. Options taking an integer argument can be handeled with |AppGetIntOption()|. Other option arguments must be processed by the application.</li>
<li>Call |AppGetArgs()| to process the remaining command line arguments.</li>
<li>Do whatever the application is supposed to do.</li>
</ul>
<p>Here is a short example: </p>
<div class="fragment"><pre class="fragment"> <a class="code" href="structMtxApplicationInfo__t.html" title="Application information structure.">MtxApplicationInfo_t</a> AppInfo = { <span class="stringliteral">&quot;sample&quot;</span>, <span class="stringliteral">&quot;MeatAxe sample application&quot;</span>,
     <span class="stringliteral">&quot;\nSYNTAX\n&quot;</span>
     <span class="stringliteral">&quot;    sample [--all]] [--level &lt;level&gt;] &lt;input&gt; &lt;ouput&gt;\n&quot;</span>
 };
 <a class="code" href="structMtxApplication__t.html" title="Application data.">MtxApplication_t</a> *App;
 <span class="keywordtype">int</span> DoAll, Level;
 <span class="keywordtype">char</span> *Input, *Output;

 <span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])
 {
     App = <a class="code" href="group__app.html#ga8925f5813215f1be93dcfa321798292b" title="Initialize the application.">AppAlloc</a>(&amp;AppInfo,argc,argv);
     DoAll = <a class="code" href="group__app.html#ga6fab9808c8d43888a82368555ffd9495" title="Check for command line option.">AppGetOption</a>(App,<span class="stringliteral">&quot;-a --all&quot;</span>);
     Level = <a class="code" href="group__app.html#ga48686381b98d7c7ab41756dce6c82f5f" title="Check for integer-valued option.">AppGetIntOption</a>(App,<span class="stringliteral">&quot;-l --level&quot;</span>,42,0,100);
     <a class="code" href="group__app.html#gab4eca466628cfa98c184b53a68e71a11" title="Get command line arguments.">AppGetArguments</a>(App,2,2);
     Input = App-&gt;<a class="code" href="structMtxApplication__t.html#a22bad28d71e9273d6a81988bc677a4c4" title="Arguments.">ArgV</a>[0];
     Output = App-&gt;<a class="code" href="structMtxApplication__t.html#a22bad28d71e9273d6a81988bc677a4c4" title="Arguments.">ArgV</a>[1];
     DoIt();
     <a class="code" href="group__app.html#ga0d084e383e4dae0b5c3c9babaf53c273" title="End an application.">AppFree</a>(App);
     <span class="keywordflow">return</span> 0;
 }
</pre></div><p> This sample application expects two arguments and recognizes two options. One option ("-l") has an additional integer argument, <em>level</em>. The value of <em>level</em> must be between 0 and 100. If not specified by the user, a default value of 42 is used.</p>
<h2><a class="anchor" id="tmpdir"></a>
Temporary Directories</h2>
<p>If an application needs a temporary directory to store interdediate files, it can use <a class="el" href="group__app.html#gaa92b1f9e36e03707542b389f13cd83cc" title="Create a temporary directory.">AppCreateTempDir()</a>. This function creates a new directory and returns its name. The directory will be removed when the application object is destroyed, i.e., in |AppFree()|. Note that the application must not leave any file in the temporary directory. Otherwise, a run-time error is generated when <a class="el" href="group__app.html#ga0d084e383e4dae0b5c3c9babaf53c273" title="End an application.">AppFree()</a> tries to remove the directory. The following code example shows how to use <a class="el" href="group__app.html#gaa92b1f9e36e03707542b389f13cd83cc" title="Create a temporary directory.">AppCreateTempDir()</a>: </p>
<div class="fragment"><pre class="fragment"> <span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)
 {
        <a class="code" href="structMtxApplication__t.html" title="Application data.">MtxApplication_t</a> *app = <a class="code" href="group__app.html#ga8925f5813215f1be93dcfa321798292b" title="Initialize the application.">AppAlloc</a>(argc,argv,&amp;appinfo);
        <span class="keyword">const</span> <span class="keywordtype">char</span> *tmpdir = <a class="code" href="group__app.html#gaa92b1f9e36e03707542b389f13cd83cc" title="Create a temporary directory.">AppCreateTempDir</a>(app);
        ...

        sprintf(file_name,<span class="stringliteral">&quot;%s/%s&quot;</span>,tempdir,<span class="stringliteral">&quot;test&quot;</span>);
        <a class="code" href="group__mat.html#gab3a78cc293a56e9b73a8c6b3d5254f4c" title="Write a matrix to a file.">MatSave</a>(mat,fn);
        ...
        <a class="code" href="group__os.html#ga296534f104ea341147116de1826c4cd1" title="Remove a file This function deletes a file.">SysRemoveFile</a>(fn);

        <a class="code" href="group__app.html#ga0d084e383e4dae0b5c3c9babaf53c273" title="End an application.">AppFree</a>(app);
        <span class="keywordflow">return</span> 0;
 }
</pre></div> <table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><b>msg_struct</b></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal data structure. <br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMtxApplication__t.html">MtxApplication_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app.html#ga8925f5813215f1be93dcfa321798292b">AppAlloc</a> (<a class="el" href="structMtxApplicationInfo__t.html">MtxApplicationInfo_t</a> const *ai, int argc, const char **argv)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the application.  <a href="#ga8925f5813215f1be93dcfa321798292b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app.html#ga0d084e383e4dae0b5c3c9babaf53c273">AppFree</a> (<a class="el" href="structMtxApplication__t.html">MtxApplication_t</a> *a)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">End an application.  <a href="#ga0d084e383e4dae0b5c3c9babaf53c273"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app.html#ga6fab9808c8d43888a82368555ffd9495">AppGetOption</a> (<a class="el" href="structMtxApplication__t.html">MtxApplication_t</a> *app, const char *spec)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for command line option.  <a href="#ga6fab9808c8d43888a82368555ffd9495"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app.html#ga24677ebead3a185ea7a90c0605de3f46">AppGetCountedOption</a> (<a class="el" href="structMtxApplication__t.html">MtxApplication_t</a> *app, const char *spec)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Count repeatable command line option.  <a href="#ga24677ebead3a185ea7a90c0605de3f46"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app.html#ga1431ec0876a7fbbd7819ec2641f4bc5e">AppGetTextOption</a> (<a class="el" href="structMtxApplication__t.html">MtxApplication_t</a> *app, const char *spec, const char *dflt)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for command line option.  <a href="#ga1431ec0876a7fbbd7819ec2641f4bc5e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app.html#ga48686381b98d7c7ab41756dce6c82f5f">AppGetIntOption</a> (<a class="el" href="structMtxApplication__t.html">MtxApplication_t</a> *app, const char *spec, int dflt, int min, int max)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for integer-valued option.  <a href="#ga48686381b98d7c7ab41756dce6c82f5f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app.html#gab4eca466628cfa98c184b53a68e71a11">AppGetArguments</a> (<a class="el" href="structMtxApplication__t.html">MtxApplication_t</a> *app, int min_argc, int max_argc)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get command line arguments.  <a href="#gab4eca466628cfa98c184b53a68e71a11"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app.html#gaa92b1f9e36e03707542b389f13cd83cc">AppCreateTempDir</a> (<a class="el" href="structMtxApplication__t.html">MtxApplication_t</a> *app)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a temporary directory.  <a href="#gaa92b1f9e36e03707542b389f13cd83cc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app.html#gaf88b48cab3ac8ea8b467a2aa0462a3ae">MtxFormatMessage</a> (char *buf, int bufsize, const char *msg, va_list al)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Format a message.  <a href="#gaf88b48cab3ac8ea8b467a2aa0462a3ae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app.html#ga00967c900c617903f6b38ec68358552d">MtxPrintMessage</a> (FILE *f, const char *fmt,...)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Print a message.  <a href="#ga00967c900c617903f6b38ec68358552d"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app.html#ga7454969768c5fe7d37dc43c0475a1c64">MtxBinDir</a> [250] = MTXBIN</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">MeatAxe Binary Directory.  <a href="#ga7454969768c5fe7d37dc43c0475a1c64"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app.html#ga8fae003dbae8e2edc00f0b830c2e6467">MtxLibDir</a> [250] = MTXLIB</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">MeatAxe Library Directory.  <a href="#ga8fae003dbae8e2edc00f0b830c2e6467"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app.html#ga2d18562e7130b8f44d76bd19a14609f5">MtxMessageLevel</a> = 0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Message level.  <a href="#ga2d18562e7130b8f44d76bd19a14609f5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0e38239179a59742e03cf09763b3d4a7"></a><!-- doxytag: member="app::MtxErrNo" ref="ga0e38239179a59742e03cf09763b3d4a7" args="" -->
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app.html#ga0e38239179a59742e03cf09763b3d4a7">MtxErrNo</a> = 0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Last error code. <br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga8925f5813215f1be93dcfa321798292b"></a><!-- doxytag: member="args.c::AppAlloc" ref="ga8925f5813215f1be93dcfa321798292b" args="(MtxApplicationInfo_t const *ai, int argc, const char **argv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMtxApplication__t.html">MtxApplication_t</a>* AppAlloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMtxApplicationInfo__t.html">MtxApplicationInfo_t</a> const *&#160;</td>
          <td class="paramname"><em>ai</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the application. </p>
<p>This function initializes a MeatAxe application. It should be called by the application's |main()| function before any other MeatAxe library function is used. |argc| and |argv| should be the same values that have been passed to |main()|. |ai|, if not NULL, must point to an initialized application information structure.</p>
<p>AppAlloc() performs the following actions:</p>
<ul>
<li>It evaluates the MTXLIB and MTXBIN environment variables. If set, these variables overwrite the default directories.</li>
<li>It calls MtxInitLibrary() to initialize the MeatAxe library.</li>
<li>It parses the command line and initializes internal data structures for use with <a class="el" href="group__app.html#ga6fab9808c8d43888a82368555ffd9495" title="Check for command line option.">AppGetOption()</a> and related functions.</li>
<li>Common options such as "-V" (see <a class="el" href="prog_stdopts.html">Standard Command Line Options</a>) are immediately evaluated. These options are not visible to the application. <dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ai</td><td>Application information. </td></tr>
    <tr><td class="paramname">argc</td><td>Number of command line arguments. </td></tr>
    <tr><td class="paramname">argv</td><td>List of command line arguments. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Pointer to the application object, or 0 on error. </dd></dl>
</li>
</ul>

</div>
</div>
<a class="anchor" id="gaa92b1f9e36e03707542b389f13cd83cc"></a><!-- doxytag: member="args.c::AppCreateTempDir" ref="gaa92b1f9e36e03707542b389f13cd83cc" args="(MtxApplication_t *app)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* AppCreateTempDir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMtxApplication__t.html">MtxApplication_t</a> *&#160;</td>
          <td class="paramname"><em>app</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a temporary directory. </p>
<p>This function creates a new, empty directory for use by the application. The location of this directory is system dependent. When the application objects is destroyed, the temporary directory will be removed automatically, if there are no files left in it. After successfull creation of the directory, the function returns the directory name. The return value is a pointer to an internal buffer, which must not be modified by the application. If the directory cannot be created for some reason, the return value is 0.</p>
<p>If the application calls AppCreateTempDir() more than once, only the first call actually creates a directory. The later calls just return the name of the directory already created. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">app</td><td>Pointer to the application object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Directory name or 0 on error. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0d084e383e4dae0b5c3c9babaf53c273"></a><!-- doxytag: member="args.c::AppFree" ref="ga0d084e383e4dae0b5c3c9babaf53c273" args="(MtxApplication_t *a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AppFree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMtxApplication__t.html">MtxApplication_t</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>End an application. </p>
<p>This function terminates a MeatAxe application. It should be called immediately before the |main()| function exits. |AppFree()| removes any temporary directory created with |AppCreateTempDir()|. If the directory is not empty at this point, a run-time error will result. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 on error. </dd></dl>

</div>
</div>
<a class="anchor" id="gab4eca466628cfa98c184b53a68e71a11"></a><!-- doxytag: member="args.c::AppGetArguments" ref="gab4eca466628cfa98c184b53a68e71a11" args="(MtxApplication_t *app, int min_argc, int max_argc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AppGetArguments </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMtxApplication__t.html">MtxApplication_t</a> *&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min_argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_argc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get command line arguments. </p>
<p>This function must be called after all command line options have been processed (see, for example, <a class="el" href="group__app.html#ga6fab9808c8d43888a82368555ffd9495" title="Check for command line option.">AppGetOption()</a>). The remaining words on the command line are treated as non-optional arguments, the global variable <code>ArgV</code> is set to the first argument and the number of arguments is stored in <code>|ArgC</code>. An error message is generated, if there are unprocessed options on the command line, or if the number of arguments is outside the range specified by <em>min_argc</em> and <em>max_argc</em>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">app</td><td>Pointer to the application object. </td></tr>
    <tr><td class="paramname">min_argc</td><td>Minimum number of arguments expected. </td></tr>
    <tr><td class="paramname">max_argc</td><td>Maximum number of arguments expected. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of arguments, or -1 on error. </dd></dl>

</div>
</div>
<a class="anchor" id="ga24677ebead3a185ea7a90c0605de3f46"></a><!-- doxytag: member="args.c::AppGetCountedOption" ref="ga24677ebead3a185ea7a90c0605de3f46" args="(MtxApplication_t *app, const char *spec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AppGetCountedOption </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMtxApplication__t.html">MtxApplication_t</a> *&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>spec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Count repeatable command line option. </p>
<p>This function counts how often a specific option is present on the command line. For example, if the command line is </p>
<div class="fragment"><pre class="fragment"> sample -a -a -aa input output
</pre></div><p> then MtxGetCountedOption("-a") returns 4. As with all command line processing functions, you must call <a class="el" href="group__app.html#ga8925f5813215f1be93dcfa321798292b" title="Initialize the application.">AppAlloc()</a> before using this function.</p>
<p>Note: This function is included for compatibility reasons only. New applications should not use it. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">app</td><td>Pointer to the application object. </td></tr>
    <tr><td class="paramname">spec</td><td>The option name(s), see below. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of times the option is present on the command line. </dd></dl>

</div>
</div>
<a class="anchor" id="ga48686381b98d7c7ab41756dce6c82f5f"></a><!-- doxytag: member="args.c::AppGetIntOption" ref="ga48686381b98d7c7ab41756dce6c82f5f" args="(MtxApplication_t *app, const char *spec, int dflt, int min, int max)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AppGetIntOption </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMtxApplication__t.html">MtxApplication_t</a> *&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dflt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check for integer-valued option. </p>
<p>This function checks if an option is present on the command line. The option is expected to have an integer value, and the value is returned. On the command line, the value must be separated from the option by one or more spaces. If the option is present on the command line but has no value, an appropriate error message is generated. If the option is not present on the command line, the function returns <em>dflt</em> as a default value.</p>
<p>If the value on the command line is not within the range defined by <em>min</em> and <em>max</em>, an error message is generated. However, if <em>min</em> is greater than <em>max</em>, no range check is performed. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">app</td><td>Pointer to the application object. </td></tr>
    <tr><td class="paramname">spec</td><td>A list of names for the option, separated by spaces. See <a class="el" href="group__app.html#ga6fab9808c8d43888a82368555ffd9495" title="Check for command line option.">AppGetOption()</a>. </td></tr>
    <tr><td class="paramname">dflt</td><td>Default value. </td></tr>
    <tr><td class="paramname">min</td><td>Minimum value of the option. </td></tr>
    <tr><td class="paramname">max</td><td>Maximum value of the option. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Value of the option, or <em>dflt</em> if the option is not present. </dd></dl>

</div>
</div>
<a class="anchor" id="ga6fab9808c8d43888a82368555ffd9495"></a><!-- doxytag: member="args.c::AppGetOption" ref="ga6fab9808c8d43888a82368555ffd9495" args="(MtxApplication_t *app, const char *spec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AppGetOption </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMtxApplication__t.html">MtxApplication_t</a> *&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>spec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check for command line option. </p>
<p>This function checks if an option is present on the command line. Before using <a class="el" href="group__app.html#ga6fab9808c8d43888a82368555ffd9495" title="Check for command line option.">AppGetOption()</a> you must call <a class="el" href="group__app.html#ga8925f5813215f1be93dcfa321798292b" title="Initialize the application.">AppAlloc()</a> to initialize the command line parser. Only simple options, i.e., options without an argument can be recognized by this function. The return value is 1, if the option is present and 0 otherwise.</p>
<p>The argument <em>spec</em> contains one or more names of the requested options. If there is more than one name, names must be separated by spaces. All names are considered equivalent, the user may use any of the names. The leading "-" must always be included in the name. Typically an option has only one or two names, as in the following example: </p>
<div class="fragment"><pre class="fragment"> <span class="keywordtype">int</span> PrintAll = <a class="code" href="group__app.html#ga6fab9808c8d43888a82368555ffd9495" title="Check for command line option.">AppGetOption</a>(App,<span class="stringliteral">&quot;-a --all&quot;</span>);
</pre></div><p> Here, the user may specify either '-a' or '--all' on the command line.</p>
<p>Each call of <a class="el" href="group__app.html#ga6fab9808c8d43888a82368555ffd9495" title="Check for command line option.">AppGetOption()</a> consumes at most one command line option. If the user specifies the same option multiple times, only the first option is recognized. Since this is usually not intended, an appropriate error message will be generated when the application calls <a class="el" href="group__app.html#gab4eca466628cfa98c184b53a68e71a11" title="Get command line arguments.">AppGetArguments()</a>. If an option can be repeated on the command line the application must make sure that all options are processed: </p>
<div class="fragment"><pre class="fragment"> <span class="keywordflow">while</span> (<a class="code" href="group__app.html#ga6fab9808c8d43888a82368555ffd9495" title="Check for command line option.">AppGetOption</a>(App,<span class="stringliteral">&quot;-a --all&quot;</span>))
 { ... }
</pre></div><p> The same remark applies to <a class="el" href="group__app.html#ga48686381b98d7c7ab41756dce6c82f5f" title="Check for integer-valued option.">AppGetIntOption()</a> and <a class="el" href="group__app.html#ga1431ec0876a7fbbd7819ec2641f4bc5e" title="Check for command line option.">AppGetTextOption()</a>. You may also use <a class="el" href="group__app.html#ga24677ebead3a185ea7a90c0605de3f46" title="Count repeatable command line option.">AppGetCountedOption()</a> to achieve a similar behaviour. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">app</td><td>Pointer to the application object. </td></tr>
    <tr><td class="paramname">spec</td><td>The option name(s), see below. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 if the option is present, 0 otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ga1431ec0876a7fbbd7819ec2641f4bc5e"></a><!-- doxytag: member="args.c::AppGetTextOption" ref="ga1431ec0876a7fbbd7819ec2641f4bc5e" args="(MtxApplication_t *app, const char *spec, const char *dflt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* AppGetTextOption </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMtxApplication__t.html">MtxApplication_t</a> *&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dflt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check for command line option. </p>
<p>This function checks if an option is present on the command line. The option is expected to have a text value, and a pointer to the value is returned. On the command line, the value must be separated from the option by one or more spaces. If the option is present on the command line but has no value, an appropriate error message is generated. If the option is not present on the command line, the function returns <em>dflt</em> as a default value. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">app</td><td>Pointer to the application object. </td></tr>
    <tr><td class="paramname">spec</td><td>A list of names for the option, separated by spaces. See <a class="el" href="group__app.html#ga6fab9808c8d43888a82368555ffd9495" title="Check for command line option.">AppGetOption()</a>. </td></tr>
    <tr><td class="paramname">dflt</td><td>Default value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Value of the option, or <em>dflt</em> if the option is not present. </dd></dl>

</div>
</div>
<a class="anchor" id="gaf88b48cab3ac8ea8b467a2aa0462a3ae"></a><!-- doxytag: member="message.c::MtxFormatMessage" ref="gaf88b48cab3ac8ea8b467a2aa0462a3ae" args="(char *buf, int bufsize, const char *msg, va_list al)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MtxFormatMessage </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bufsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>al</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Format a message. </p>
<p>This function formats a message using a |printf|-like syntax. Only the follwing four format codes may be used within |msg|:</p>
<ul>
<li><code>%d</code> prints a signed decimal integer. The corresponding argument must be of type <code>int</code>.</li>
<li><code>%s</code> prints a string. The corresponding argument must be a pointer to a null-terminated string.</li>
<li><code>%E</code> takes an <code>int</code> argument, which must be one the MeatAxe error codes (<code>MTX_ERR_xxxx</code>) defined in "meataxe.h". It prints a description of the error.</li>
<li><code>%S</code> prints the system error name corresponding to the current value of <code>errno</code>.</li>
</ul>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Buffer for the message. </td></tr>
    <tr><td class="paramname">bufsize</td><td>Size of buffer. </td></tr>
    <tr><td class="paramname">msg</td><td>The message text. </td></tr>
    <tr><td class="paramname">al</td><td>Optional arguments for the message (see description). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga00967c900c617903f6b38ec68358552d"></a><!-- doxytag: member="message.c::MtxPrintMessage" ref="ga00967c900c617903f6b38ec68358552d" args="(FILE *f, const char *fmt,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MtxPrintMessage </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Print a message. </p>
<p>This function writes a message to a file using a <code>printf()-like</code> syntax. See <a class="el" href="group__app.html#gaf88b48cab3ac8ea8b467a2aa0462a3ae" title="Format a message.">MtxFormatMessage()</a> for details. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td>File to write to. </td></tr>
    <tr><td class="paramname">fmt</td><td>Message to write </td></tr>
    <tr><td class="paramname">...</td><td>Optional arguments for the message. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ga7454969768c5fe7d37dc43c0475a1c64"></a><!-- doxytag: member="args.c::MtxBinDir" ref="ga7454969768c5fe7d37dc43c0475a1c64" args="[250]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="group__app.html#ga7454969768c5fe7d37dc43c0475a1c64">MtxBinDir</a>[250] = MTXBIN</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>MeatAxe Binary Directory. </p>
<p>This variable contains the name of the MeatAxe binary directory. This directory is used, for example, to find the <a class="el" href="prog_maketab.html">maketab</a> program for automatic arithmetic table generation. The value of MtxBinDir can be set on the command line with the "-B" option. Otherwise, the value of the environment variable MTXBIN is used. If neither "-B" nor MTXBIN are defined, the default directory, which was selected when building the MeatAxe, is used. </p>

</div>
</div>
<a class="anchor" id="ga8fae003dbae8e2edc00f0b830c2e6467"></a><!-- doxytag: member="args.c::MtxLibDir" ref="ga8fae003dbae8e2edc00f0b830c2e6467" args="[250]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="group__app.html#ga8fae003dbae8e2edc00f0b830c2e6467">MtxLibDir</a>[250] = MTXLIB</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>MeatAxe Library Directory. </p>
<p>This variable contains the name of the MeatAxe library directory. Arithmetic table files are searched in this directory. The value of MtxLibDir can be set on the command line with the "-L" option. Otherwise, the value of the environment variable MTXLIB is used. If neither "-L" nor MTXLIB are defined, the default directory, which was selected when building the MeatAxe, is used. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__app.html#ga7454969768c5fe7d37dc43c0475a1c64" title="MeatAxe Binary Directory.">MtxBinDir</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga2d18562e7130b8f44d76bd19a14609f5"></a><!-- doxytag: member="message.c::MtxMessageLevel" ref="ga2d18562e7130b8f44d76bd19a14609f5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__app.html#ga2d18562e7130b8f44d76bd19a14609f5">MtxMessageLevel</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Message level. </p>
<p>This value determines which messages generated by MSG0()...MSG4() are actually output and which are suppressed. </p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
<hr size="1"><address style="text-align: right;"><small>
MeatAxe 2.4 documentation, generated on Mon Nov 28 2011 22:17:18</small></address>
</body>
</html>
